//- views/overview.pug

extends _layout

block content
  main.main
    //- First, we check if the 'tours' array passed from the controller has any items.
    if tours.length > 0
      //- If there ARE tours, we show the card container and loop through them.
      .card-container
        each tour in tours
          .card
            .card__header
              .card__picture
                .card__picture-overlay  
                img.card__picture-img(src=`/img/tours/${tour.imageCover}`, alt=`${tour.name}`)
              h3.heading-tertirary
                span= tour.name

            .card__details
              h4.card__sub-heading #{tour.difficulty} #{tour.duration}-day tour
              p.card__text= tour.summary
              .card__data
                svg.card__icon
                  use(xlink:href='/img/icons.svg#icon-map-pin')
                span= tour.startLocation.description
              .card__data
                svg.card__icon
                  use(xlink:href='/img/icons.svg#icon-calendar')
                span= new Date(tour.startDates[0]).toLocaleString('en-us', {month: 'long', year: 'numeric'})
              .card__data
                svg.card__icon
                  use(xlink:href='/img/icons.svg#icon-flag')
                span #{tour.locations.length} stops
              .card__data
                svg.card__icon
                  use(xlink:href='/img/icons.svg#icon-user')
                span #{tour.maxGroupSize} people

            .card__footer
              p
                span.card__footer-value ₹#{tour.price}
                span.card__footer-text  per person
              p.card__ratings
                span.card__footer-value= tour.ratingsAverage
                span.card__footer-text  rating (#{tour.ratingsQuantity})
              
              a.btn.btn--green.btn--small(href=`/tour/${tour.slug}`) Details
    else
      //- If there are NO tours, this 'else' block is rendered instead.
      //- This will only happen on the "My Bookings" page when the user has no bookings.
      .no-tours
        h2.heading-secondary.ma-bt-lg You have not booked any tours yet!
        p Why not explore some of our amazing tours and book your next adventure?
        a.btn.btn--green(href='/') Explore All Tours